# Tarkov-Dev GraphQL API Ï∞∏Ï°∞ÏÑú

## üåê API Í∞úÏöî

Tarkov-Dev ÌîÑÎ°úÏ†ùÌä∏ÏóêÏÑú Ï†úÍ≥µÌïòÎäî GraphQL APIÏùò ÏÉÅÏÑ∏ Î™ÖÏÑ∏ÏÑúÏûÖÎãàÎã§.

### ÏóîÎìúÌè¨Ïù∏Ìä∏
- **Production**: `https://api.tarkov.dev/graphql`
- **Development**: `https://dev-api.tarkov.dev/graphql`  
- **Local**: `http://127.0.0.1:8787/graphql`

### Ïù∏Ï¶ù
- ÌòÑÏû¨ Ïù∏Ï¶ù Î∂àÌïÑÏöî (Public API)
- Rate Limiting Í∞ÄÎä•ÏÑ± ÏûàÏùå

## üìä Maps Query

### Í∏∞Î≥∏ ÏøºÎ¶¨
```graphql
query TarkovDevMaps {
    maps(lang: "en", gameMode: "regular") {
        id
        tarkovDataId
        name
        normalizedName
        wiki
        description
        enemies
        raidDuration
        players
    }
}
```

### Îß§Í∞úÎ≥ÄÏàò
- **lang**: Ïñ∏Ïñ¥ ÏΩîÎìú (en, ko, ru, de, fr, es, pt, it, ja, pl)
- **gameMode**: Í≤åÏûÑ Î™®Îìú (regular, pve)

### ÏôÑÏ†ÑÌïú Maps Ïä§ÌÇ§Îßà

#### Í∏∞Î≥∏ Ï†ïÎ≥¥
```graphql
{
    id: String!                    # Í≥†Ïú† ÏãùÎ≥ÑÏûê
    tarkovDataId: String          # Tarkov Îç∞Ïù¥ÌÑ∞ ID
    name: String!                 # Îßµ Ïù¥Î¶Ñ (ÌïúÍ∏Ä: "Ìå©ÌÜ†Î¶¨")
    normalizedName: String!       # Ï†ïÍ∑úÌôîÎêú Ïù¥Î¶Ñ ("factory")
    wiki: String                  # ÏúÑÌÇ§ ÎßÅÌÅ¨
    description: String           # Îßµ ÏÑ§Î™Ö
    enemies: [String]             # Ï†Å Ïú†Ìòï Î™©Î°ù
    raidDuration: Int             # Î†àÏù¥Îìú ÏßÄÏÜçÏãúÍ∞Ñ (Î∂Ñ)
    players: String               # ÌîåÎ†àÏù¥Ïñ¥ Ïàò ("4-6")
}
```

#### Î≥¥Ïä§ Ï†ïÎ≥¥
```graphql
{
    bosses: [Boss] {
        name: String!             # Î≥¥Ïä§ Ïù¥Î¶Ñ
        normalizedName: String!   # Ï†ïÍ∑úÌôîÎêú Ïù¥Î¶Ñ  
        spawnChance: Float!       # Ïä§Ìè∞ ÌôïÎ•† (0.0-1.0)
        spawnTime: Int           # Ïä§Ìè∞ ÏãúÍ∞Ñ (Ï¥à)
        spawnTimeRandom: Boolean # ÎûúÎç§ Ïä§Ìè∞ Ïó¨Î∂Ä
        spawnTrigger: String     # Ïä§Ìè∞ Ìä∏Î¶¨Í±∞
        
        spawnLocations: [SpawnLocation] {
            spawnKey: String!     # Ïä§Ìè∞ ÏßÄÏó≠ ÌÇ§
            name: String!         # ÏßÄÏó≠ Ïù¥Î¶Ñ
            chance: Float!        # Ìï¥Îãπ ÏßÄÏó≠ Ïä§Ìè∞ ÌôïÎ•†
        }
        
        escorts: [Escort] {
            name: String!         # Ìò∏ÏúÑÎ≥ë Ïù¥Î¶Ñ
            normalizedName: String!
            amount: [Amount] {
                count: Int!       # Ìò∏ÏúÑÎ≥ë Ïàò
                chance: Float!    # ÌôïÎ•†
            }
        }
        
        switch: Switch {
            id: String!           # Ïä§ÏúÑÏπò ID
        }
    }
}
```

#### Ïä§Ìè∞ Ìè¨Ïù∏Ìä∏
```graphql
{
    spawns: [Spawn] {
        zoneName: String!         # ÏßÄÏó≠ Ïù¥Î¶Ñ
        position: Position! {     # 3D ÏúÑÏπò
            x: Float!
            y: Float!
            z: Float!
        }
        sides: [String]!          # ÏßÑÏòÅ (pmc, scav, all)
        categories: [String]!     # Ïπ¥ÌÖåÍ≥†Î¶¨ (player, bot, boss, sniper)
    }
}
```

#### Ï∂îÏ∂úÍµ¨ Ï†ïÎ≥¥
```graphql
{
    extracts: [Extract] {
        id: String!               # Í≥†Ïú† ÏãùÎ≥ÑÏûê
        name: String!             # Ï∂îÏ∂úÍµ¨ Ïù¥Î¶Ñ
        faction: String           # ÏßÑÏòÅ (pmc, scav, shared)
        
        position: Position! {     # Ï§ëÏã¨ ÏúÑÏπò
            x: Float!
            y: Float!
            z: Float!
        }
        
        outline: [Position]       # Í≤ΩÍ≥ÑÏÑ† Ï¢åÌëúÎì§
        top: Float               # ÏµúÎåÄ ÎÜíÏù¥
        bottom: Float            # ÏµúÏÜå ÎÜíÏù¥
        
        switches: [Switch] {      # ÌôúÏÑ±Ìôî Ïä§ÏúÑÏπòÎì§
            id: String!
            name: String!
        }
    }
}
```

#### Ìä∏ÎûúÏßì (Îßµ Ïù¥Îèô)
```graphql
{
    transits: [Transit] {
        id: String!
        description: String!      # ÏÑ§Î™Ö
        conditions: String        # Ï°∞Í±¥
        position: Position!
        outline: [Position]
        top: Float
        bottom: Float
    }
}
```

#### ÏûêÎ¨ºÏá† Ï†ïÎ≥¥
```graphql
{
    locks: [Lock] {
        lockType: String!         # ÏûêÎ¨ºÏá† Ïú†Ìòï (door, container, trunk)
        needsPower: Boolean!      # Ï†ÑÎ†• ÌïÑÏöî Ïó¨Î∂Ä
        position: Position!
        outline: [Position]
        top: Float
        bottom: Float
        
        key: Item! {             # ÌïÑÏöîÌïú Ïó¥Ïá†
            id: String!
        }
    }
}
```

#### ÏúÑÌóò ÏßÄÏó≠
```graphql
{
    hazards: [Hazard] {
        hazardType: String!       # ÏúÑÌóò Ïú†Ìòï
        name: String!            # ÏúÑÌóò ÏßÄÏó≠ Ïù¥Î¶Ñ
        position: Position!
        outline: [Position]
        top: Float
        bottom: Float
    }
    
    artillery: Artillery {       # Ìè¨Í≤© ÏßÄÏó≠
        zones: [ArtilleryZone] {
            position: Position!
            outline: [Position]
            top: Float
            bottom: Float
        }
    }
}
```

#### Î£®Ìä∏ Ïª®ÌÖåÏù¥ÎÑà
```graphql
{
    lootContainers: [LootContainer] {
        position: Position!
        lootContainer: Container! {
            id: String!
            name: String!
            normalizedName: String!
        }
    }
}
```

#### ÏûêÏú† Î£®Ìä∏
```graphql
{
    lootLoose: [LooseLoot] {
        position: Position!
        items: [Item] {
            id: String!
        }
    }
}
```

#### Ïä§ÏúÑÏπò Î∞è ÏÉÅÌò∏ÏûëÏö©
```graphql
{
    switches: [Switch] {
        id: String!
        name: String!
        switchType: String!       # Ïä§ÏúÑÏπò Ïú†Ìòï
        position: Position!
        
        activatedBy: Switch {     # ÏÑ†Ìñâ Ïä§ÏúÑÏπò
            id: String!
            name: String!
        }
        
        activates: [Activation] { # ÌôúÏÑ±Ìôî ÎåÄÏÉÅÎì§
            operation: String!    # ÏûëÏóÖ Ïú†Ìòï
            target: ActivationTarget {
                __typename: String # MapSwitch | MapExtract
                ... on MapSwitch {
                    id: String!
                    name: String!
                }
                ... on MapExtract {
                    id: String!
                    name: String!
                    faction: String!
                }
            }
        }
    }
}
```

#### Í≥†Ï†ï Î¨¥Í∏∞
```graphql
{
    stationaryWeapons: [StationaryWeapon] {
        position: Position!
        stationaryWeapon: Weapon! {
            name: String!
            shortName: String!
        }
    }
}
```

## üîß Ïã§Ï†ú ÏÇ¨Ïö© ÏòàÏ†ú

### Factory Îßµ Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå
```javascript
const FACTORY_QUERY = `
    query GetFactoryMap {
        maps(lang: "en", gameMode: "regular") {
            id
            name
            normalizedName
            description
            raidDuration
            players
            
            spawns {
                zoneName
                position { x y z }
                sides
                categories  
            }
            
            extracts {
                id
                name
                faction
                position { x y z }
                outline { x y z }
            }
            
            bosses {
                name
                spawnChance
                spawnLocations {
                    spawnKey
                    name
                    chance
                }
            }
        }
    }
`;

// API Ìò∏Ï∂ú
const fetchFactoryData = async () => {
    const response = await fetch('https://api.tarkov.dev/graphql', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json'
        },
        body: JSON.stringify({
            query: FACTORY_QUERY
        })
    });
    
    const data = await response.json();
    const factoryMap = data.data.maps.find(m => m.normalizedName === 'factory');
    return factoryMap;
};
```

### ÏóêÎü¨ Ï≤òÎ¶¨
```javascript
const safeApiCall = async (query, variables = {}) => {
    try {
        const response = await fetch('https://api.tarkov.dev/graphql', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify({
                query,
                variables
            })
        });
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        
        if (data.errors) {
            console.error('GraphQL errors:', data.errors);
            // Î∂ÄÎ∂ÑÏ†Å Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî Í≤ΩÏö∞ÏóêÎèÑ Ï≤òÎ¶¨
            if (data.data) {
                return data.data;
            }
            throw new Error('GraphQL query failed');
        }
        
        return data.data;
    } catch (error) {
        console.error('API call failed:', error);
        throw error;
    }
};
```

## üì¶ C# ÌÜµÌï© ÏòàÏ†ú

### HTTP ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Íµ¨ÌòÑ
```csharp
public class TarkovDevApiClient
{
    private readonly HttpClient _httpClient;
    private const string ApiUrl = "https://api.tarkov.dev/graphql";
    
    public TarkovDevApiClient()
    {
        _httpClient = new HttpClient();
        _httpClient.DefaultRequestHeaders.Add("Accept", "application/json");
    }
    
    public async Task<dynamic> QueryAsync(string query, object variables = null)
    {
        var request = new
        {
            query = query,
            variables = variables
        };
        
        var json = JsonSerializer.Serialize(request);
        var content = new StringContent(json, Encoding.UTF8, "application/json");
        
        var response = await _httpClient.PostAsync(ApiUrl, content);
        response.EnsureSuccessStatusCode();
        
        var responseJson = await response.Content.ReadAsStringAsync();
        return JsonSerializer.Deserialize<dynamic>(responseJson);
    }
    
    public async Task<MapData> GetFactoryMapAsync()
    {
        const string query = @"
            query GetFactoryMap {
                maps(lang: ""en"", gameMode: ""regular"") {
                    id
                    name
                    normalizedName
                    spawns {
                        position { x y z }
                        sides
                        categories
                    }
                    extracts {
                        id
                        name
                        faction
                        position { x y z }
                    }
                }
            }
        ";
        
        var result = await QueryAsync(query);
        var maps = result.data.maps;
        
        return maps.FirstOrDefault(m => m.normalizedName == "factory");
    }
}
```

### Îç∞Ïù¥ÌÑ∞ Î™®Îç∏
```csharp
public class MapData
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string NormalizedName { get; set; }
    public List<SpawnPoint> Spawns { get; set; }
    public List<ExtractPoint> Extracts { get; set; }
    public List<Boss> Bosses { get; set; }
}

public class Position
{
    public float X { get; set; }
    public float Y { get; set; }
    public float Z { get; set; }
}

public class SpawnPoint
{
    public string ZoneName { get; set; }
    public Position Position { get; set; }
    public List<string> Sides { get; set; }
    public List<string> Categories { get; set; }
}

public class ExtractPoint
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Faction { get; set; }
    public Position Position { get; set; }
    public List<Position> Outline { get; set; }
}
```

## üöÄ ÏÑ±Îä• ÏµúÏ†ÅÌôî

### ÏøºÎ¶¨ ÏµúÏ†ÅÌôî
```javascript
// ÌïÑÏöîÌïú ÌïÑÎìúÎßå ÏöîÏ≤≠
const MINIMAL_QUERY = `
    query GetMinimalMapData {
        maps(lang: "en", gameMode: "regular") {
            normalizedName
            spawns {
                position { x z }  // YÏ∂ï Ï†úÏô∏
                categories
            }
            extracts {
                name
                faction
                position { x z }
            }
        }
    }
`;
```

### Ï∫êÏã± Ï†ÑÎûµ
```javascript
class ApiCache {
    constructor(ttl = 300000) { // 5Î∂Ñ TTL
        this.cache = new Map();
        this.ttl = ttl;
    }
    
    get(key) {
        const item = this.cache.get(key);
        if (!item) return null;
        
        if (Date.now() - item.timestamp > this.ttl) {
            this.cache.delete(key);
            return null;
        }
        
        return item.data;
    }
    
    set(key, data) {
        this.cache.set(key, {
            data,
            timestamp: Date.now()
        });
    }
}

const apiCache = new ApiCache();

const getCachedMapData = async (mapName) => {
    const cacheKey = `map_${mapName}`;
    let data = apiCache.get(cacheKey);
    
    if (!data) {
        data = await fetchMapData(mapName);
        apiCache.set(cacheKey, data);
    }
    
    return data;
};
```

## ‚ö†Ô∏è Ï†úÌïúÏÇ¨Ìï≠ Î∞è Ï£ºÏùòÏÇ¨Ìï≠

### Rate Limiting
- Íµ¨Ï≤¥Ï†ÅÏù∏ Ï†úÌïúÏùÄ Î∂àÎ™Ö
- Í≥ºÎèÑÌïú ÏöîÏ≤≠ Ïãú 429 ÏóêÎü¨ Í∞ÄÎä•ÏÑ±
- Ï∫êÏã± ÌïÑÏàò

### CORS Ï†ïÏ±Ö
- WebView2ÏóêÏÑú ÏßÅÏ†ë Ìò∏Ï∂ú Ïãú CORS Ïù¥Ïäà Í∞ÄÎä•
- C# Î∞±ÏóîÎìúÎ•º ÌÜµÌïú ÌîÑÎ°ùÏãú Í∂åÏû•

### Îç∞Ïù¥ÌÑ∞ Ïã†Î¢∞ÏÑ±
- Í≤åÏûÑ ÏóÖÎç∞Ïù¥Ìä∏ Ïãú Îç∞Ïù¥ÌÑ∞ Î≥ÄÍ≤Ω Í∞ÄÎä•ÏÑ±
- Ï£ºÍ∏∞Ï†ÅÏù∏ Îç∞Ïù¥ÌÑ∞ Í≤ÄÏ¶ù ÌïÑÏöî

### ÎÑ§Ìä∏ÏõåÌÅ¨ ÏùòÏ°¥ÏÑ±
- Ïò§ÌîÑÎùºÏù∏ ÌôòÍ≤ΩÏóêÏÑú ÎèôÏûë Î∂àÍ∞Ä
- Ìè¥Î∞± Î©îÏª§ÎãàÏ¶ò ÌïÑÏöî

---

*ÏûëÏÑ±Ïùº: 2025-08-27*  
*ÏûëÏÑ±Ïûê: Claude Code SuperClaude*  
*Î≤ÑÏ†Ñ: 1.0*